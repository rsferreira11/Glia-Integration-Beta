!function(){"use strict";function r(r){return function(r){if(Array.isArray(r))return t(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,e){if(!r)return;if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(r,e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var e,n="undefined"!=typeof Float32Array?Float32Array:Array;function a(){var r=new n(16);return n!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function o(r,t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],c=t[5],f=t[6],v=t[7],A=t[8],m=t[9],l=t[10],d=t[11],s=t[12],h=t[13],b=t[14],g=t[15],y=e[0],p=e[1],R=e[2],E=e[3];return r[0]=y*n+p*u+R*A+E*s,r[1]=y*a+p*c+R*m+E*h,r[2]=y*o+p*f+R*l+E*b,r[3]=y*i+p*v+R*d+E*g,y=e[4],p=e[5],R=e[6],E=e[7],r[4]=y*n+p*u+R*A+E*s,r[5]=y*a+p*c+R*m+E*h,r[6]=y*o+p*f+R*l+E*b,r[7]=y*i+p*v+R*d+E*g,y=e[8],p=e[9],R=e[10],E=e[11],r[8]=y*n+p*u+R*A+E*s,r[9]=y*a+p*c+R*m+E*h,r[10]=y*o+p*f+R*l+E*b,r[11]=y*i+p*v+R*d+E*g,y=e[12],p=e[13],R=e[14],E=e[15],r[12]=y*n+p*u+R*A+E*s,r[13]=y*a+p*c+R*m+E*h,r[14]=y*o+p*f+R*l+E*b,r[15]=y*i+p*v+R*d+E*g,r}function i(r,t,e){var n,a,o,i,u,c,f,v,A,m,l,d,s=e[0],h=e[1],b=e[2];return t===r?(r[12]=t[0]*s+t[4]*h+t[8]*b+t[12],r[13]=t[1]*s+t[5]*h+t[9]*b+t[13],r[14]=t[2]*s+t[6]*h+t[10]*b+t[14],r[15]=t[3]*s+t[7]*h+t[11]*b+t[15]):(n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],c=t[5],f=t[6],v=t[7],A=t[8],m=t[9],l=t[10],d=t[11],r[0]=n,r[1]=a,r[2]=o,r[3]=i,r[4]=u,r[5]=c,r[6]=f,r[7]=v,r[8]=A,r[9]=m,r[10]=l,r[11]=d,r[12]=n*s+u*h+A*b+t[12],r[13]=a*s+c*h+m*b+t[13],r[14]=o*s+f*h+l*b+t[14],r[15]=i*s+v*h+d*b+t[15]),r}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)}),(e=new Image).src="images/test_image-b9fa08548005938e.jpg",e.onload=function(){e.style.position="absolute",e.style.top="0",document.body.appendChild(e),console.log("image added")},function(){var t=document.querySelector("canvas");if(!t)throw new Error("Canvas not found");var e=t.getContext("webgl");if(!e)throw new Error("WebGL not supported");var n=[.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5];var u,c=(u=[1,1,1,0,0,1,0,1,1,0,0,0],r(Array(6)).reduce((function(r){return r.concat(u)}),[])),f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);var v=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,v),e.bufferData(e.ARRAY_BUFFER,new Float32Array(c),e.STATIC_DRAW);var A=function(r,t){var e=r.createTexture(),n=new Image;return n.onload=function(){r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D)},n.src=t,e}(e,"images/default_tree-71c5bad5717f5d9e.png");e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,A);var m=e.createShader(e.VERTEX_SHADER);if(m){e.shaderSource(m,"precision mediump float;\n\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUV;\n\nuniform mat4 matrix;\n\nvoid main() {\n  vUV = uv;\n  gl_Position = matrix * vec4(position, 1);\n}\n"),e.compileShader(m);var l=e.createShader(e.FRAGMENT_SHADER);if(l){e.shaderSource(l,"precision mediump float;\nvarying vec2 vUV;\nuniform sampler2D textureID;\n\nvoid main() {\n    gl_FragColor = texture2D(textureID, vUV);\n}\n"),e.compileShader(l);var d=e.createProgram();if(d){e.attachShader(d,m),e.attachShader(d,l),e.linkProgram(d);var s=e.getAttribLocation(d,"position");e.enableVertexAttribArray(s),e.bindBuffer(e.ARRAY_BUFFER,f),e.vertexAttribPointer(s,3,e.FLOAT,!1,0,0);var h=e.getAttribLocation(d,"uv");e.enableVertexAttribArray(h),e.bindBuffer(e.ARRAY_BUFFER,v),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.useProgram(d),e.enable(e.DEPTH_TEST);var b={matrix:e.getUniformLocation(d,"matrix"),textureID:e.getUniformLocation(d,"textureID")};e.uniform1i(b.textureID,0);var g,y,p,R,E,T,x,F=a(),S=a(),D=a();g=D,y=75*Math.PI/180,p=t.width/t.height,R=1e-4,E=1e4,x=1/Math.tan(y/2),g[0]=x/p,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=x,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,null!=E&&E!==1/0?(T=1/(R-E),g[10]=(E+R)*T,g[14]=2*E*R*T):(g[10]=-1,g[14]=-2*R);var _=a(),I=a();i(F,F,[0,0,-2]),i(S,S,[0,0,1.5]),function(r,t){var e=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],c=t[6],f=t[7],v=t[8],A=t[9],m=t[10],l=t[11],d=t[12],s=t[13],h=t[14],b=t[15],g=e*u-n*i,y=e*c-a*i,p=e*f-o*i,R=n*c-a*u,E=n*f-o*u,T=a*f-o*c,x=v*s-A*d,F=v*h-m*d,S=v*b-l*d,D=A*h-m*s,_=A*b-l*s,I=m*b-l*h,U=g*I-y*_+p*D+R*S-E*F+T*x;U&&(U=1/U,r[0]=(u*I-c*_+f*D)*U,r[1]=(a*_-n*I-o*D)*U,r[2]=(s*T-h*E+b*R)*U,r[3]=(m*E-A*T-l*R)*U,r[4]=(c*S-i*I-f*F)*U,r[5]=(e*I-a*S+o*F)*U,r[6]=(h*p-d*T-b*y)*U,r[7]=(v*T-m*p+l*y)*U,r[8]=(i*_-u*S+f*x)*U,r[9]=(n*S-e*_-o*x)*U,r[10]=(d*E-s*p+b*g)*U,r[11]=(A*p-v*E-l*g)*U,r[12]=(u*F-i*D-c*x)*U,r[13]=(e*D-n*F+a*x)*U,r[14]=(s*y-d*R-h*g)*U,r[15]=(v*R-A*y+m*g)*U)}(S,S),function r(){!function(r,t,e){var n=Math.sin(e),a=Math.cos(e),o=t[0],i=t[1],u=t[2],c=t[3],f=t[8],v=t[9],A=t[10],m=t[11];t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=o*a-f*n,r[1]=i*a-v*n,r[2]=u*a-A*n,r[3]=c*a-m*n,r[8]=o*n+f*a,r[9]=i*n+v*a,r[10]=u*n+A*a,r[11]=c*n+m*a}(F,F,Math.PI/200),function(r,t,e){var n=Math.sin(e),a=Math.cos(e),o=t[0],i=t[1],u=t[2],c=t[3],f=t[4],v=t[5],A=t[6],m=t[7];t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=o*a+f*n,r[1]=i*a+v*n,r[2]=u*a+A*n,r[3]=c*a+m*n,r[4]=f*a-o*n,r[5]=v*a-i*n,r[6]=A*a-u*n,r[7]=m*a-c*n}(F,F,Math.PI/400),function(r,t,e){var n=Math.sin(e),a=Math.cos(e),o=t[4],i=t[5],u=t[6],c=t[7],f=t[8],v=t[9],A=t[10],m=t[11];t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=o*a+f*n,r[5]=i*a+v*n,r[6]=u*a+A*n,r[7]=c*a+m*n,r[8]=f*a-o*n,r[9]=v*a-i*n,r[10]=A*a-u*n,r[11]=m*a-c*n}(F,F,Math.PI/800),o(_,S,F),o(I,D,_),e.uniformMatrix4fv(b.matrix,!1,I),e.drawArrays(e.TRIANGLES,0,n.length/3),requestAnimationFrame(r)}()}}}}()}();
//# sourceMappingURL=main.js.map
